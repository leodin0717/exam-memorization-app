<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>행정학 WHAT 전략 | 통합 공시 앱</title>
    <meta name="description" content="공무원 9급 행정학 WHAT 함정패턴 분석 기반 암기전략 웹앱 (국가직 중심)">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="admin-style.css">
</head>

<body>
    <div class="bg-orbs">
        <div class="orb"></div>
        <div class="orb"></div>
        <div class="orb"></div>
    </div>

    <header class="app-header">
        <div class="header-inner">
            <div class="header-logo"><span class="logo-icon">🎯</span>행정학 WHAT</div>
            <div style="display:flex;align-items:center;gap:8px;">
                <label for="subjectSwitch" style="font-size:12px;color:var(--text-dim);font-weight:700;">과목</label>
                <select id="subjectSwitch" style="padding:6px 10px;border-radius:10px;background:var(--surface2);color:var(--text);border:1px solid var(--border);font-size:12px;font-weight:700;">
                    <option value="admin" selected>행정학</option>
                    <option value="law">행정법</option>
                    <option value="kor">국어</option>
                    <option value="eng">영어</option>
                    <option value="his">한국사</option>
                </select>
            </div>
            <a class="journal-link" id="journalLink" href="journal.html?subject=admin">📒 학습기록</a>
            <div class="dday-badge" id="ddayBadge">D-46</div>
            <nav class="nav-tabs" id="navTabs">
                <button class="nav-tab active" data-page="dashboard">📊 대시보드</button>
                <button class="nav-tab" data-page="study">📝 학습</button>
                <button class="nav-tab" data-page="ox">⭕ OX훈련</button>
                <button class="nav-tab" data-page="what">🔍 WHAT</button>
                <button class="nav-tab" data-page="weak">📉 취약분석</button>
                <button class="nav-tab" data-page="guide">📘 가이드</button>
            </nav>
        </div>
    </header>

    <main class="main-container">
        <!-- DASHBOARD -->
        <div class="page active" id="page-dashboard">
            <div class="dash-grid">
                <div class="stat-card">
                    <div class="stat-label">총 학습 문항</div>
                    <div class="stat-value" id="statTotal">0 / 0</div>
                    <div class="stat-sub">전체 문제 중 풀이 완료</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">정답률</div>
                    <div class="stat-value" id="statAccuracy">--%</div>
                    <div class="stat-sub">전체 평균 정답률</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">오늘 학습</div>
                    <div class="stat-value" id="statToday">0</div>
                    <div class="stat-sub">오늘 푼 문제 수</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">연속 학습</div>
                    <div class="streak-display">🔥 <span id="statStreak">0</span>일 연속</div>
                </div>
            </div>
            <h3 class="section-title">🎯 복습 큐</h3>
            <div class="review-board" id="reviewBoard"></div>
            <h3 class="section-title">🏁 90점 목표 코치</h3>
            <div class="coach-panel" id="ninetyCoach"></div>
            <h3 class="section-title">🧪 출제 커버리지 점검</h3>
            <div class="audit-panel" id="sourceAudit"></div>
            <h3 class="section-title">📚 단원별 진도</h3>
            <div class="chapter-grid" id="chapterGrid"></div>
        </div>

        <!-- STUDY -->
        <div class="page" id="page-study">
            <div class="filter-panel">
                <div class="filter-group">
                    <label>중요도</label>
                    <div class="filter-btns">
                        <button class="filter-btn active" data-filter="imp" data-value="all">전체</button>
                        <button class="filter-btn" data-filter="imp" data-value="S">S급</button>
                        <button class="filter-btn" data-filter="imp" data-value="A">A급</button>
                        <button class="filter-btn" data-filter="imp" data-value="B">B급</button>
                    </div>
                </div>
                <div class="filter-group">
                    <label>학습범위</label>
                    <select id="targetFilter">
                        <option value="national9" selected>국가직9급 중심(추천)</option>
                        <option value="all">전체(보조기출 포함)</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>단원</label>
                    <select id="chapterFilter">
                        <option value="all">전체 단원</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>정렬</label>
                    <select id="sortOrder">
                        <option value="random">랜덤</option>
                        <option value="importance">중요도순</option>
                        <option value="weak">취약순</option>
                        <option value="review">복습우선(오답·지연)</option>
                        <option value="year-desc">최신순</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>압축훈련 시간</label>
                    <select id="challengePreset">
                        <option value="17" selected>압축 17분 (추천)</option>
                        <option value="15">초압축 15분</option>
                        <option value="18">압축 18분</option>
                        <option value="20">표준 20분</option>
                    </select>
                    <div class="touch-note">가로 iPad 손가락/펜슬 기준 빠른 회전 훈련</div>
                </div>
                <div class="filter-group">
                    <label>암기·인출 가속</label>
                    <div class="training-options">
                        <label class="train-option">
                            <input type="checkbox" id="recallModeToggle" checked>
                            <span>🧠 인출선행(선지 보기 전 5초 회상)</span>
                        </label>
                        <label class="train-option">
                            <input type="checkbox" id="speedModeToggle">
                            <span>⚡ 스피드모드(정답 후 자동 다음)</span>
                        </label>
                    </div>
                </div>
                <div class="study-actions">
                    <div class="filter-count" id="filteredCount">(0문항 선택됨)</div>
                    <div class="action-btns">
                        <button class="btn-start" id="startStudy">🚀 학습 시작</button>
                        <button class="btn-start btn-challenge" id="startChallenge">🏁 압축 챌린지(20문)</button>
                    </div>
                </div>
            </div>
            <div class="study-area" id="studyArea" style="display:none;">
                <div class="challenge-status" id="challengeStatus" style="display:none;"></div>
                <div class="pressure-rope" id="studyRopeTimer" hidden>
                    <div class="pressure-head">
                        <span class="pressure-label">🔥 압박 타임라인</span>
                        <span class="pressure-time" id="studyRopeText">--.-초</span>
                    </div>
                    <div class="pressure-track">
                        <div class="pressure-ropeline" id="studyRopeFill"></div>
                        <div class="pressure-embers"></div>
                        <div class="pressure-ropeburn" id="studyRopeBurn"></div>
                    </div>
                </div>
                <div class="study-nav">
                    <button class="nav-arrow" id="prevQ">◀</button>
                    <span class="q-counter" id="qCounter">0 / 0</span>
                    <button class="nav-arrow" id="nextQ">▶</button>
                </div>
                <div id="questionArea"></div>
            </div>
        </div>

        <!-- OX -->
        <div class="page" id="page-ox">
            <div class="filter-panel">
                <div class="filter-group">
                    <label>중요도</label>
                    <div class="filter-btns">
                        <button class="filter-btn active" data-filter="ox-imp" data-value="all">전체</button>
                        <button class="filter-btn" data-filter="ox-imp" data-value="S">S급</button>
                        <button class="filter-btn" data-filter="ox-imp" data-value="A">A급</button>
                        <button class="filter-btn" data-filter="ox-imp" data-value="B">B급</button>
                    </div>
                </div>
                <div class="filter-group">
                    <label>학습범위</label>
                    <select id="oxTargetFilter">
                        <option value="national9" selected>국가직9급 중심(추천)</option>
                        <option value="all">전체(보조기출 포함)</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>단원</label>
                    <select id="oxChapterFilter">
                        <option value="all">전체 단원</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>문항수</label>
                    <select id="oxCount">
                        <option value="10">10문항</option>
                        <option value="20" selected>20문항</option>
                        <option value="30">30문항</option>
                        <option value="all">전체</option>
                    </select>
                </div>
                <div class="filter-count" id="oxFilteredCount">(0문항 생성됨)</div>
                <button class="btn-start" id="startOX">⭕ OX훈련 시작</button>
            </div>
            <div class="ox-area" id="oxArea" style="display:none;">
                <div class="pressure-rope" id="oxRopeTimer" hidden>
                    <div class="pressure-head">
                        <span class="pressure-label">🔥 압박 타임라인</span>
                        <span class="pressure-time" id="oxRopeText">--.-초</span>
                    </div>
                    <div class="pressure-track">
                        <div class="pressure-ropeline" id="oxRopeFill"></div>
                        <div class="pressure-embers"></div>
                        <div class="pressure-ropeburn" id="oxRopeBurn"></div>
                    </div>
                </div>
                <div class="study-nav">
                    <button class="nav-arrow" id="prevOX">◀</button>
                    <span class="q-counter" id="oxCounter">0 / 0</span>
                    <button class="nav-arrow" id="nextOX">▶</button>
                </div>
                <div id="oxQuestionArea"></div>
            </div>
        </div>

        <!-- WHAT Strategy -->
        <div class="page" id="page-what">
            <h3 class="section-title">🔍 WHAT 함정분석 기법</h3>
            <p class="section-desc">행정학 문제풀이의 핵심 사고 로직: 선지의 함정을 체계적으로 분석하세요.</p>
            <div class="what-grid" id="whatGrid"></div>
            <h3 class="section-title" style="margin-top:2rem;">⚠️ 빈출 함정 패턴 TOP 7</h3>
            <div class="trap-list" id="trapList"></div>
        </div>

        <!-- Weak Analysis -->
        <div class="page" id="page-weak">
            <h3 class="section-title">📉 취약 분석</h3>
            <div class="insight-panel" id="metaInsight"></div>
            <div id="weakAnalysis"></div>
        </div>

        <div class="page" id="page-guide">
            <h3 class="section-title">📘 90점 압축 가이드</h3>
            <div id="guideContent"></div>
        </div>
    </main>

    <!-- Meta-cognition Modal -->
    <div class="modal-overlay" id="metaModal" style="display:none;">
        <div class="modal-content">
            <h3>🧠 메타인지 태깅</h3>
            <p class="modal-desc" id="metaSecondsLabel">선택까지 걸린 시간: 0.0초</p>
            <div class="meta-reasons" id="metaReasons">
                <p class="meta-sub">느린 이유(복수선택 가능):</p>
                <label class="meta-reason"><input type="checkbox" value="scholar"> 👤 학자/이론 주체를 몰랐다</label>
                <label class="meta-reason"><input type="checkbox" value="framework"> 🧩 분류틀·비교축이 헷갈렸다</label>
                <label class="meta-reason"><input type="checkbox" value="contrast"> 🔄 반대개념 변별이 약했다</label>
                <label class="meta-reason"><input type="checkbox" value="number"> 🔢 숫자·기간·비율 암기가 약했다</label>
                <label class="meta-reason"><input type="checkbox" value="wording"> 🪤 문구 함정(부정/예외)에 걸렸다</label>
                <label class="meta-reason"><input type="checkbox" value="unknown"> ❓ 개념 자체가 낯설었다</label>
            </div>
            <div class="meta-actions">
                <button class="btn-start btn-skip" id="metaSkip" type="button">건너뛰기</button>
                <button class="btn-start" id="metaSubmit" type="button">기록 완료</button>
            </div>
        </div>
    </div>

    <script src="admin-data.js"></script>
    <script src="admin-data-supplement.js"></script>
    <script src="study-journal.js"></script>
    <script src="admin-app.js"></script>
</body>

</html>
